<!-- Modern Preloader Component -->
<div id="preloader" class="fixed inset-0 bg-bg-primary z-[9999] flex items-center justify-center transition-all duration-500" aria-hidden="true">
  <!-- Preloader Content -->
  <div class="preloader-content text-center">
    <!-- Logo/Brand Animation -->
    <div class="preloader-logo mb-8">
      <div class="relative">
        <!-- Main Logo Circle -->
        <div class="w-20 h-20 mx-auto relative">
          <!-- Outer Ring -->
          <div class="absolute inset-0 border-4 border-primary/20 rounded-full"></div>
          
          <!-- Animated Ring -->
          <div class="absolute inset-0 border-4 border-transparent border-t-primary rounded-full animate-spin"></div>
          
          <!-- Inner Logo -->
          <div class="absolute inset-2 bg-primary/10 rounded-full flex items-center justify-center backdrop-blur-sm">
            <span class="text-primary font-bold text-2xl font-mono">UA</span>
          </div>
          
          <!-- Pulse Effect -->
          <div class="absolute inset-0 border-2 border-primary/30 rounded-full animate-pulse"></div>
        </div>
        
        <!-- Brand Name -->
        <div class="mt-4 overflow-hidden">
          <h1 class="text-2xl font-bold text-text-primary animate-slide-up">
            Umutcan Algan
          </h1>
          <p class="text-text-secondary text-sm mt-1 animate-slide-up animation-delay-200">
            Full Stack Developer
          </p>
        </div>
      </div>
    </div>

    <!-- Loading Progress -->
    <div class="preloader-progress mb-6">
      <!-- Progress Bar -->
      <div class="w-64 h-1 bg-bg-secondary rounded-full overflow-hidden mx-auto">
        <div class="h-full bg-gradient-to-r from-primary to-primary-dark rounded-full transition-all duration-300 animate-progress" style="width: 0%"></div>
      </div>
      
      <!-- Progress Text -->
      <div class="mt-3">
        <p class="text-text-secondary text-sm">
          <span class="progress-text">Loading...</span>
          <span class="progress-percentage ml-2 font-mono text-primary">0%</span>
        </p>
      </div>
    </div>

    <!-- Loading Steps -->
    <div class="preloader-steps space-y-2 max-w-xs mx-auto">
      <div class="step flex items-center text-xs text-text-muted opacity-50 transition-all duration-300" data-step="0">
        <div class="w-1.5 h-1.5 bg-primary rounded-full mr-2 opacity-0 transition-opacity duration-300"></div>
        <span>Initializing application...</span>
      </div>
      <div class="step flex items-center text-xs text-text-muted opacity-50 transition-all duration-300" data-step="1">
        <div class="w-1.5 h-1.5 bg-primary rounded-full mr-2 opacity-0 transition-opacity duration-300"></div>
        <span>Loading components...</span>
      </div>
      <div class="step flex items-center text-xs text-text-muted opacity-50 transition-all duration-300" data-step="2">
        <div class="w-1.5 h-1.5 bg-primary rounded-full mr-2 opacity-0 transition-opacity duration-300"></div>
        <span>Fetching GitHub data...</span>
      </div>
      <div class="step flex items-center text-xs text-text-muted opacity-50 transition-all duration-300" data-step="3">
        <div class="w-1.5 h-1.5 bg-primary rounded-full mr-2 opacity-0 transition-opacity duration-300"></div>
        <span>Optimizing performance...</span>
      </div>
      <div class="step flex items-center text-xs text-text-muted opacity-50 transition-all duration-300" data-step="4">
        <div class="w-1.5 h-1.5 bg-primary rounded-full mr-2 opacity-0 transition-opacity duration-300"></div>
        <span>Ready to explore!</span>
      </div>
    </div>
  </div>

  <!-- Background Animation -->
  <div class="preloader-bg absolute inset-0 overflow-hidden pointer-events-none">
    <!-- Floating Particles -->
    <div class="particle absolute w-2 h-2 bg-primary/20 rounded-full animate-float" style="top: 20%; left: 10%; animation-delay: 0s;"></div>
    <div class="particle absolute w-1 h-1 bg-primary/30 rounded-full animate-float" style="top: 60%; left: 80%; animation-delay: 2s;"></div>
    <div class="particle absolute w-1.5 h-1.5 bg-primary/25 rounded-full animate-float" style="top: 40%; left: 90%; animation-delay: 4s;"></div>
    <div class="particle absolute w-2 h-2 bg-primary/15 rounded-full animate-float" style="top: 80%; left: 20%; animation-delay: 1s;"></div>
    <div class="particle absolute w-1 h-1 bg-primary/35 rounded-full animate-float" style="top: 30%; left: 70%; animation-delay: 3s;"></div>
  </div>
</div>

<!-- Preloader Styles -->
<style>
  /* Preloader Animations */
  @keyframes slide-up {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes progress {
    from { width: 0%; }
    to { width: 100%; }
  }

  @keyframes float {
    0%, 100% { 
      transform: translateY(0) rotate(0deg); 
      opacity: 0.3;
    }
    50% { 
      transform: translateY(-20px) rotate(180deg); 
      opacity: 1;
    }
  }

  .animate-slide-up {
    animation: slide-up 0.6s ease-out forwards;
  }

  .animate-progress {
    animation: progress 3s ease-out forwards;
  }

  .animate-float {
    animation: float 6s ease-in-out infinite;
  }

  .animation-delay-200 {
    animation-delay: 0.2s;
  }

  /* Preloader Hide Animation */
  .preloader-hide {
    opacity: 0;
    transform: scale(0.95);
    pointer-events: none;
  }

  /* Step Activation */
  .step.active {
    opacity: 1;
    color: var(--text-primary);
  }

  .step.active .w-1\.5 {
    opacity: 1;
  }

  /* Reduced Motion */
  @media (prefers-reduced-motion: reduce) {
    .animate-spin,
    .animate-pulse,
    .animate-float {
      animation: none;
    }
    
    .animate-slide-up {
      animation: none;
      opacity: 1;
      transform: none;
    }
  }

  /* Loading Performance Optimization */
  .preloader-content {
    will-change: transform, opacity;
  }

  .particle {
    will-change: transform, opacity;
  }
</style>

<!-- Preloader JavaScript -->
<script>
  // Preloader functionality
  class PreloaderManager {
    constructor() {
      this.preloader = document.getElementById('preloader');
      this.progressBar = this.preloader?.querySelector('.animate-progress');
      this.progressText = this.preloader?.querySelector('.progress-text');
      this.progressPercentage = this.preloader?.querySelector('.progress-percentage');
      this.steps = this.preloader?.querySelectorAll('.step');
      this.currentStep = 0;
      this.progress = 0;
    }

    init() {
      if (!this.preloader) return;
      
      this.simulateLoading();
    }

    simulateLoading() {
      const loadingSteps = [
        { text: 'Initializing application...', duration: 400 },
        { text: 'Loading components...', duration: 600 },
        { text: 'Fetching GitHub data...', duration: 800 },
        { text: 'Optimizing performance...', duration: 500 },
        { text: 'Ready to explore!', duration: 300 }
      ];

      let totalDuration = 0;
      loadingSteps.forEach((step, index) => {
        setTimeout(() => {
          this.activateStep(index, step.text);
          this.updateProgress((index + 1) / loadingSteps.length * 100);
          
          if (index === loadingSteps.length - 1) {
            setTimeout(() => this.hide(), 500);
          }
        }, totalDuration);
        totalDuration += step.duration;
      });
    }

    activateStep(index, text) {
      // Deactivate previous steps
      this.steps?.forEach((step, i) => {
        if (i <= index) {
          step.classList.add('active');
        }
      });

      // Update text
      if (this.progressText) {
        this.progressText.textContent = text;
      }
    }

    updateProgress(percentage) {
      this.progress = Math.min(percentage, 100);
      
      if (this.progressBar) {
        this.progressBar.style.width = `${this.progress}%`;
      }
      
      if (this.progressPercentage) {
        this.progressPercentage.textContent = `${Math.round(this.progress)}%`;
      }
    }

    hide() {
      if (!this.preloader) return;
      
      this.preloader.classList.add('preloader-hide');
      
      setTimeout(() => {
        this.preloader.style.display = 'none';
        this.preloader.setAttribute('aria-hidden', 'true');
        
        // Trigger custom event
        window.dispatchEvent(new CustomEvent('preloaderHidden'));
      }, 500);
    }

    show() {
      if (!this.preloader) return;
      
      this.preloader.style.display = 'flex';
      this.preloader.classList.remove('preloader-hide');
      this.preloader.setAttribute('aria-hidden', 'false');
      
      // Reset state
      this.currentStep = 0;
      this.progress = 0;
      this.updateProgress(0);
      
      // Reset steps
      this.steps?.forEach(step => step.classList.remove('active'));
    }
  }

  // Initialize preloader
  const preloader = new PreloaderManager();
  
  // Auto-start when DOM is ready
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', () => preloader.init());
  } else {
    preloader.init();
  }

  // Make globally available
  window.preloader = preloader;
</script> 